#!/bin/sh

# sysv-args.test is part of the GNU m4 testsuite

. ${srcdir}/defs

cat <<\EOF >in
include(sysv-args.m4)dnl
EOF

cat <<\EOF >ok


0
1
6


hej med dig
hej med dig en gang igen
an awful lot of argument at least more that ten silly arguments
EOF

cat <<\EOF >okerr
m4trace: -1- nargs
m4trace: -1- nargs
m4trace: -1- nargs
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
m4trace: -1- concat
EOF

M4PATH=$srcdir:$srcdir/../examples $M4 in >out 2>err
sed -e "s, ../../src/m4:, m4:," err >sederr && mv sederr err

$CMP -s out ok && $CMP -s err okerr
