#! /bin/sh -x

# helps bootstrapping M4, when checked out from CVS
# requires GNU autoconf, GNU automake and GNU libtool

auxdir=`grep '^AC_CONFIG_AUX_DIR' configure.in | sed 's/^.*(\([^)]*\)).*$/\1/'`

rm -f config.cache

# shtoolize -q -I ./$auxdir -o ./shtool echo move install mkdir version && \
# libtoolize -f -c || exit 1
 gettextize -f -c  || exit 1
aclocal -I ./$auxdir  || exit 1
autoheader || exit 1

touch ./$auxdir/ltconfig
automake --add-missing --copy || { rm ./$auxdir/ltconfig && exit 1; }
rm ./$auxdir/ltconfig

autoconf -l ./$auxdir || exit 1

cd tests && AWK=${AWK-awk} ./get_them ../doc/m4.texinfo

exit 0
