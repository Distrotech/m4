#!/bin/sh

# foreach.test is part of the GNU m4 testsuite

. ${srcdir}/defs

cat ${srcdir}/foreach.m4 >in

cat <<\EOF >ok

Word was: foo
Word was: bar
Word was: foobar


# Quote torture from Akim Demaille <akim@epita.fr>
Word was: a
Word was: (b
Word was: c)


# Something more complex, from Pierre Gaumond <gaumondp@ere.umontreal.ca>.
case "$1" in
  1)
    vara=" -1";;
  2)
    varb=" -2";;
  3)
    varc=" -3";;
esac
EOF

M4PATH=$srcdir:$srcdir/../tests $M4 -d in >out 2>err
sed -e "s,^[^:]*[lt-]*m4[.ex]*:,m4:," err >sederr && mv sederr err
$CMP -s out ok
